(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{70170:(e,t,r)=>{Promise.resolve().then(r.bind(r,67902))},67902:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>K});var l=r(95155),n=r(12115),a=r(94026);let s=e=>{let t=Math.max(...e),r=e.map(e=>Math.exp(e-t)),l=r.reduce((e,t)=>e+t,0);return r.map(e=>e/l)},o=async e=>{let t;console.log("Inside of the prediction file",e);let r=await a.wV.create("/MNIST-DRAW/model/mnist-12.onnx",{executionProviders:["webgl"]});console.log("Model Input Names:",r.inputNames);let l=e.map(e=>e/255),n=new a.qY("float32",l,[1,1,28,28]);console.log("Tensor:",n);let o={Input3:n};console.log("Feeds:",o);let i=await r.run(o);console.log("Model Output:",i);let c=i.Plus214_Output_0;console.log("Output Tensor:",c),console.log("Logits:",t=Array.isArray(c.data)?c.data.map(e=>Number(e)):Array.from(c.data));let d=s(t);return console.log("Probabilities:",d),d},i=(0,n.createContext)(void 0),c=()=>{let e=(0,n.useContext)(i);if(!e)throw Error("useCanvasContext must be used within a CanvasProvider");return e},d=e=>{let{children:t}=e,[r,a]=(0,n.useState)([]),[s,c]=(0,n.useState)([]),d=async e=>{console.log("Fetching prediction for:",e);let t=await o(e);console.log("Setting prediction probabilities:",t),c([...t])};return(0,l.jsx)(i.Provider,{value:{canvasData:r,setCanvasData:a,predictionProbabilities:s,setPredictionProbabilities:c,fetchPrediction:d},children:t})};var u=r(91290),f=r(31027),h=r(43463),x=r(69795);function m(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,x.QP)((0,h.$)(t))}let g=(0,f.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),v=n.forwardRef((e,t)=>{let{className:r,variant:n,size:a,asChild:s=!1,...o}=e,i=s?u.DX:"button";return(0,l.jsx)(i,{className:m(g({variant:n,size:a,className:r})),ref:t,...o})});function p(){let e=(0,n.useRef)(null),t=(0,n.useRef)(null),[r,a]=(0,n.useState)(!1),{setCanvasData:s,fetchPrediction:o}=c();(0,n.useEffect)(()=>{let r=e.current;if(!r)return;r.width=500,r.height=500;let l=r.getContext("2d");l&&(l.fillStyle="black",l.fillRect(0,0,r.width,r.height),l.lineWidth=5,l.lineCap="round",l.strokeStyle="white",t.current=l)},[]);let i=()=>{let r=e.current;if(!r)return;let l=t.current;if(!l)return;l.filter="blur(2px)",l.drawImage(r,0,0);let n=document.createElement("canvas"),a=n.getContext("2d");if(!a)return;n.width=28,n.height=28,a.drawImage(r,0,0,28,28);let i=a.getImageData(0,0,28,28).data,c=[];for(let e=0;e<i.length;e+=4){let t=i[e];c.push(t)}l.filter="none",s(c),o(c)};return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)("canvas",{ref:e,className:"border border-gray-500 cursor-crosshair",onMouseDown:e=>{a(!0),t.current&&(t.current.beginPath(),t.current.moveTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY))},onMouseUp:()=>{a(!1),i()},onMouseMove:e=>{r&&t.current&&(t.current.lineTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY),t.current.stroke())}}),(0,l.jsx)(v,{onClick:()=>{let r=e.current,l=t.current;r&&l&&(l.clearRect(0,0,r.width,r.height),l.fillStyle="black",l.fillRect(0,0,r.width,r.height))},className:"w-full max-w-[200px] m-4 font-bold rounded hover:bg-gray-400",children:"Clear Canvas"})]})}v.displayName="Button";var b=r(62738),y=r(15255),j=r(12800),w=r(14969),N=r(58581),k=r(27112),_=r(86354);let C={light:"",dark:".dark"},S=n.createContext(null);function M(){let e=n.useContext(S);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let E=n.forwardRef((e,t)=>{let{id:r,className:a,children:s,config:o,...i}=e,c=n.useId(),d="chart-".concat(r||c.replace(/:/g,""));return(0,l.jsx)(S.Provider,{value:{config:o},children:(0,l.jsxs)("div",{"data-chart":d,ref:t,className:m("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",a),...i,children:[(0,l.jsx)(P,{id:d,config:o}),(0,l.jsx)(N.u,{children:s})]})})});E.displayName="Chart";let P=e=>{let{id:t,config:r}=e,n=Object.entries(r).filter(e=>{let[,t]=e;return t.theme||t.color});return n.length?(0,l.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(C).map(e=>{let[r,l]=e;return"\n".concat(l," [data-chart=").concat(t,"] {\n").concat(n.map(e=>{var t;let[l,n]=e,a=(null===(t=n.theme)||void 0===t?void 0:t[r])||n.color;return a?"  --color-".concat(l,": ").concat(a,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},R=k.m,I=n.forwardRef((e,t)=>{let{active:r,payload:a,className:s,indicator:o="dot",hideLabel:i=!1,hideIndicator:c=!1,label:d,labelFormatter:u,labelClassName:f,formatter:h,color:x,nameKey:g,labelKey:v}=e,{config:p}=M(),b=n.useMemo(()=>{var e;if(i||!(null==a?void 0:a.length))return null;let[t]=a,r="".concat(v||t.dataKey||t.name||"value"),n=O(p,t,r),s=v||"string"!=typeof d?null==n?void 0:n.label:(null===(e=p[d])||void 0===e?void 0:e.label)||d;return u?(0,l.jsx)("div",{className:m("font-medium",f),children:u(s,a)}):s?(0,l.jsx)("div",{className:m("font-medium",f),children:s}):null},[d,u,a,i,f,p,v]);if(!r||!(null==a?void 0:a.length))return null;let y=1===a.length&&"dot"!==o;return(0,l.jsxs)("div",{ref:t,className:m("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",s),children:[y?null:b,(0,l.jsx)("div",{className:"grid gap-1.5",children:a.map((e,t)=>{let r="".concat(g||e.name||e.dataKey||"value"),n=O(p,e,r),a=x||e.payload.fill||e.color;return(0,l.jsx)("div",{className:m("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===o&&"items-center"),children:h&&(null==e?void 0:e.value)!==void 0&&e.name?h(e.value,e.name,e,t,e.payload):(0,l.jsxs)(l.Fragment,{children:[(null==n?void 0:n.icon)?(0,l.jsx)(n.icon,{}):!c&&(0,l.jsx)("div",{className:m("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===o,"w-1":"line"===o,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===o,"my-0.5":y&&"dashed"===o}),style:{"--color-bg":a,"--color-border":a}}),(0,l.jsxs)("div",{className:m("flex flex-1 justify-between leading-none",y?"items-end":"items-center"),children:[(0,l.jsxs)("div",{className:"grid gap-1.5",children:[y?b:null,(0,l.jsx)("span",{className:"text-muted-foreground",children:(null==n?void 0:n.label)||e.name})]}),e.value&&(0,l.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});I.displayName="ChartTooltip";let T=_.s,L=n.forwardRef((e,t)=>{let{className:r,hideIcon:n=!1,payload:a,verticalAlign:s="bottom",nameKey:o}=e,{config:i}=M();return(null==a?void 0:a.length)?(0,l.jsx)("div",{ref:t,className:m("flex items-center justify-center gap-4","top"===s?"pb-3":"pt-3",r),children:a.map(e=>{let t="".concat(o||e.dataKey||"value"),r=O(i,e,t);return(0,l.jsxs)("div",{className:m("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==r?void 0:r.icon)&&!n?(0,l.jsx)(r.icon,{}):(0,l.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==r?void 0:r.label]},e.value)})}):null});function O(e,t,r){if("object"!=typeof t||null===t)return;let l="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,n=r;return r in t&&"string"==typeof t[r]?n=t[r]:l&&r in l&&"string"==typeof l[r]&&(n=l[r]),n in e?e[n]:e[r]}L.displayName="ChartLegend";let A={probability:{label:"Probability",color:"#2563eb"}};function D(){let{predictionProbabilities:e}=c(),t=e.length?e.map((e,t)=>({number:t.toString(),probability:e})):[{number:"0",probability:0}];return(0,l.jsx)(E,{config:A,className:"h-[350px] w-full",children:(0,l.jsxs)(b.E,{accessibilityLayer:!0,data:t,children:[(0,l.jsx)(y.d,{}),(0,l.jsx)(j.W,{dataKey:"number",tickLine:!0,tickMargin:10,axisLine:!0,tickFormatter:e=>e.slice(0,3)}),(0,l.jsx)(R,{content:(0,l.jsx)(I,{})}),(0,l.jsx)(T,{content:(0,l.jsx)(L,{}),wrapperStyle:{fontSize:"24px"}}),(0,l.jsx)(w.y,{dataKey:"probability",fill:"var(--color-probability)",radius:4})]})})}function K(){return(0,l.jsxs)("main",{className:"flex flex-col items-center min-h-screen bg-slate-800 p-8",children:[(0,l.jsxs)("div",{className:"flex flex-col w-full h-[200px] bg-blue-800 items-center justify-center text-center",children:[(0,l.jsx)("h1",{className:"text-6xl font-extrabold text-white",children:"MNIST DRAW"})," ",(0,l.jsx)("h2",{className:"m-6 text-2xl",children:"Handwritten digit classifier powered by a CNN running on your client in real time!"})]}),(0,l.jsx)("div",{className:"flex w-full flex-row m-32",children:(0,l.jsxs)(d,{children:[(0,l.jsxs)("div",{className:"flex flex-col items-center w-full",children:[(0,l.jsx)("div",{className:"absolute top-[310px] text-center",children:(0,l.jsx)("h2",{className:"font-semibold text-white text-3xl",children:"Draw a number [0-9]"})}),(0,l.jsx)(p,{})]}),(0,l.jsx)("div",{className:"flex flex-col justify-end items-center w-full ml-[-150px]",children:(0,l.jsx)(D,{})})]})}),(0,l.jsxs)("div",{className:"flex flex-col w-full h-[200px] bg-blue-800 items-center justify-center text-center",children:[(0,l.jsx)("h1",{className:"text-6xl font-extrabold text-white",children:"Tech Stack"})," ",(0,l.jsx)("h3",{children:"typerscript, tailwind-css, html, react, NextJS, python, pytorch"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[643,169,441,517,358],()=>t(70170)),_N_E=e.O()}]);